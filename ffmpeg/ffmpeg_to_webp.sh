#!/bin/bash


##############################################################################
##############################################################################
##
## MAGIC NUMBERS
##
##############################################################################
##############################################################################


ARG_NUMBER=2


##############################################################################
##############################################################################
##
## USAGE
##
##############################################################################
##############################################################################


usage(){
    if [ $# -lt $ARG_NUMBER ]; then
        echo "Usage: "
        echo "$0 \ "
        echo "  --input [PATH TO MP4 FILE] \ "
        echo "  --output [PATH TO WEBP FILE] \ "
        exit 1
    fi
}


##############################################################################
##############################################################################
##
## PARSE ARGS
##
##############################################################################
##############################################################################


parse_args(){
    while [[ $# > 1 ]];
    do
        key="$1"

        case $key in
            --input)
            INPUT="$2"
            shift # past argument
            ;;
            --output)
            OUTPUT="$2"
            shift # past argument
            ;;
            *)
            # unknown option
            ;;
        esac
        shift
    done
}

##############################################################################
##############################################################################
##
## MAIN
##
##############################################################################
##############################################################################


main(){

    ffmpeg -i $INPUT \
        -vcodec libwebp \
        -filter:v fps=fps=20 \
        -lossless 1 \
        -loop 0 \
        -preset default \
        -an -vsync 0 \
        -aspect 16:9 \
        $OUTPUT

}


usage $@
parse_args $@

main

